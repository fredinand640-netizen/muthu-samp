<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Muthu SAMP - iOS Launcher</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="iphone-mockup">
        <div class="notch"></div>
        <div class="status-bar">
            <span id="clock">12:55</span>
            <div class="status-icons">
                üì∂ üîã
            </div>
        </div>

        <div class="content" id="homePage">
            <header class="animate-in" style="animation-delay: 0.1s;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div>
                        <h1>Muthu SAMP</h1>
                        <p class="subtitle">Join San Andreas Multiplayer</p>
                    </div>
                </div>

                <div class="glass" style="padding: 12px; margin-bottom: 20px;">
                    <div class="stat-label" style="margin-bottom: 5px;">Your Nickname</div>
                    <input type="text" value="Player_Name" id="nicknameInput"
                        style="width: 100%; background: rgba(0,0,0,0.3); border: none; padding: 10px; border-radius: 8px; color: var(--primary); font-weight: 700; font-family: monospace;">
                </div>

                <div class="glass animate-in" style="padding: 15px; margin-bottom: 20px; animation-delay: 0.2s;">
                    <div class="stat-label" style="margin-bottom: 10px;">Direct Connect</div>
                    <input type="text" placeholder="IP Address:Port" id="directIp"
                        style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); padding: 12px; border-radius: 10px; color: white; margin-bottom: 10px; font-family: monospace;">
                    <button class="btn-primary" style="padding: 10px;" onclick="directConnect()">CONNECT TO IP</button>
                </div>
            </header>

            <section class="server-list">
                <!-- Servers only appear here after Direct Connect -->
                <div id="recentServersContainer"></div>

                <div id="emptyState" style="text-align: center; padding: 40px 20px; color: var(--text-dim);">
                    <div style="font-size: 40px; margin-bottom: 15px;">üåê</div>
                    <p style="font-size: 14px;">No active servers found.</p>
                    <p style="font-size: 11px; margin-top: 5px; opacity: 0.7;">Enter an IP above to discover and join a
                        Roleplay community.</p>
                </div>

                <!-- History Section (Hidden until connection) -->
                <div id="historySection" style="display: none; margin-top: 30px;">
                    <div class="stat-label" style="margin: 10px 0; font-size: 10px; color: gold;">üïí Connection History
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </section>
        </div>

        <div class="content" id="favoritesPage" style="display: none;">
            <header>
                <h1>Favorites</h1>
                <p class="subtitle">Your bookmarked roleplay servers</p>
            </header>
            <section class="server-list" id="favoritesContainerPage">
                <!-- Favorites will be injected here -->
            </section>
        </div>

        <div class="content" id="downloadPage" style="display: none;">
            <header>
                <h1>Asset Manager</h1>
                <p class="subtitle">Link launcher to your local game files</p>
            </header>

            <div class="glass" style="padding: 20px; text-align: center;">
                <div style="font-size: 48px; margin-bottom: 10px;">üìÇ</div>
                <div class="server-name">GTA: San Andreas Local Data</div>
                <p style="font-size: 12px; color: var(--text-dim); margin-bottom: 20px;">Import files to enable server
                    synchronization</p>

                <div
                    style="width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-bottom: 10px; overflow: hidden;">
                    <div id="progressFill"
                        style="width: 0%; height: 100%; background: #4caf50; transition: width 0.3s;"></div>
                </div>
                <div class="stat-label" id="progressStatus">READY TO IMPORT</div>
                <div class="stat-label" id="currentFileLabel" style="font-size: 8px; margin-top: 5px; color: #4caf50;">
                    Select folder to begin...</div>

                <button class="btn-primary" id="downloadBtn" style="margin-top: 20px; background: #2e7d32;"
                    onclick="triggerFilePicker()">SELECT GAME FOLDER</button>

                <!-- Hidden System Picker -->
                <input type="file" id="gameFilePicker" style="display: none;" webkitdirectory directory multiple
                    onchange="handleFileSelect(event)">
            </div>
        </div>

        <div class="content" id="settingsPage" style="display: none;">
            <header>
                <h1>Settings</h1>
                <p class="subtitle">Customize your gameplay experience</p>
            </header>

            <div class="glass" style="padding: 10px; margin-bottom: 20px;">
                <div class="settings-item">
                    <span>Game Sound</span>
                    <label class="switch">
                        <input type="checkbox" checked id="soundToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <span>Auto-Save Screenshots</span>
                    <label class="switch">
                        <input type="checkbox" checked id="screenToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <span>High FPS Mode (60 FPS)</span>
                    <label class="switch">
                        <input type="checkbox" id="fpsToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-item" style="border-bottom: none;">
                    <span>Chat Lines</span>
                    <input type="number" value="10" min="5" max="20" id="chatLines"
                        style="width: 50px; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); color: var(--primary); border-radius: 5px; text-align: center; font-weight: bold;">
                </div>
            </div>

            <div class="glass" style="padding: 15px;">
                <h3 style="font-size: 14px; margin-bottom: 10px; color: var(--text-dim);">Advanced</h3>
                <div class="settings-item" style="border-bottom: none;">
                    <span>Clear Game Cache</span>
                    <button
                        style="background: rgba(255,0,0,0.2); border: 1px solid red; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 10px;">CLEAN</button>
                </div>
            </div>
        </div>

        <div class="content" id="gamePage"
            style="display: none; padding: 0; background: #000; overflow: hidden; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 2000;">
            <!-- Loading Screen -->
            <div id="gameLoading"
                style="position: absolute; inset: 0; background: url('https://wallpaperaccess.com/full/1162985.jpg') center/cover; z-index: 10; display: flex; flex-direction: column; justify-content: flex-end; padding: 40px;">
                <div
                    style="background: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                    <div class="server-name" id="loadingServerName">CONNECTING TO SERVER...</div>
                    <div
                        style="width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; margin: 10px 0; overflow: hidden;">
                        <div id="gameLoadFill"
                            style="width: 0%; height: 100%; background: var(--primary); transition: width 0.1s;"></div>
                    </div>
                    <div class="stat-label" id="loadingStatus">INITIALIZING STREAMER...</div>
                </div>
            </div>

            <!-- Game UI / HUD -->
            <div id="gameHUD" style="position: absolute; inset: 0; display: none; pointer-events: none;">
                <!-- Chat Box -->
                <div id="gameChat"
                    style="position: absolute; top: 50px; left: 20px; width: 70%; max-height: 150px; overflow: hidden; pointer-events: auto;">
                    <div style="font-size: 11px; text-shadow: 1px 1px #000; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; gap: 2px;"
                        id="chatMessages">
                        <!-- Messages Injected Here -->
                    </div>
                </div>

                <!-- Radar / Minimap -->
                <div
                    style="position: absolute; bottom: 40px; left: 20px; width: 100px; height: 100px; border: 3px solid #000; border-radius: 2px; background: rgba(0,0,0,0.5); overflow: hidden;">
                    <div
                        style="position: absolute; inset: 0; background: url('https://media.gtanet.com/images/4375_gta_iv_radar.jpg') center/cover; opacity: 0.8;">
                    </div>
                    <div
                        style="position: absolute; top: 50%; left: 50%; width: 6px; height: 6px; background: white; transform: translate(-50%, -50%) rotate(45deg); border: 1px solid black;">
                    </div>
                </div>

                <!-- Stats (Money, Health, Armor) -->
                <div style="position: absolute; top: 50px; right: 20px; text-align: right;">
                    <div id="gameMoney"
                        style="color: #2b6a2e; font-size: 24px; font-weight: 900; -webkit-text-stroke: 1px black; font-family: 'Pricedown', 'Inter', sans-serif;">
                        $00001500</div>
                    <div
                        style="display: flex; flex-direction: column; align-items: flex-end; gap: 5px; margin-top: 5px;">
                        <!-- Armor Bar -->
                        <div style="width: 80px; height: 10px; background: rgba(0,0,0,0.5); border: 1px solid #000;">
                            <div style="width: 100%; height: 100%; background: #ffffff;"></div>
                        </div>
                        <!-- Health Bar -->
                        <div style="width: 80px; height: 10px; background: rgba(0,0,0,0.5); border: 1px solid #000;">
                            <div style="width: 80%; height: 100%; background: #b71c1c;"></div>
                        </div>
                    </div>
                </div>

                <!-- Weapon Icon -->
                <div
                    style="position: absolute; top: 120px; right: 20px; width: 60px; height: 60px; background: rgba(0,0,0,0.3); border-radius: 5px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.1);">
                    <span style="font-size: 30px;">üî´</span>
                </div>

                <!-- Controls Overlays (Visual Only) -->
                <div
                    style="position: absolute; bottom: 40px; right: 20px; display: flex; flex-direction: column; gap: 10px; pointer-events: auto;">
                    <div style="display: flex; gap: 10px;">
                        <button onclick="quitGame()" class="glass"
                            style="width: 50px; height: 50px; border-radius: 50%; border: none; color: white; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; background: rgba(255,0,0,0.3);">EXIT</button>
                        <button class="glass"
                            style="width: 50px; height: 50px; border-radius: 50%; border: none; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">‚å®Ô∏è</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="glass"
                            style="width: 50px; height: 50px; border-radius: 50%; border: none; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px;">üèÉ</button>
                        <button class="glass"
                            style="width: 60px; height: 60px; border-radius: 50%; border: none; color: white; display: flex; align-items: center; justify-content: center; font-size: 24px;">üëä</button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="glass"
            style="position: absolute; bottom: 20px; left: 20px; right: 20px; height: 65px; display: flex; justify-content: space-around; align-items: center; border-radius: 25px; padding-bottom: env(safe-area-inset-bottom, 0);">
            <div onclick="showPage('home')"
                style="cursor: pointer; display: flex; flex-direction: column; align-items: center;">
                <span style="font-size: 20px;">üåê</span>
                <span class="stat-label" style="font-size: 8px; margin-top: 4px;">Servers</span>
            </div>
            <div onclick="showPage('favorites')"
                style="cursor: pointer; display: flex; flex-direction: column; align-items: center;">
                <span style="font-size: 20px;">‚≠ê</span>
                <span class="stat-label" style="font-size: 8px; margin-top: 4px;">Favorites</span>
            </div>
            <div onclick="showPage('download')"
                style="cursor: pointer; display: flex; flex-direction: column; align-items: center;">
                <span style="font-size: 20px;">üì•</span>
                <span class="stat-label" style="font-size: 8px; margin-top: 4px;">Assets</span>
            </div>
            <div onclick="showPage('settings')"
                style="cursor: pointer; display: flex; flex-direction: column; align-items: center;">
                <span style="font-size: 20px;">‚öôÔ∏è</span>
                <span class="stat-label" style="font-size: 8px; margin-top: 4px;">Settings</span>
            </div>
        </nav>
        <div class="home-indicator"></div>
    </div>

    <script src="app.js"></script>
</body>

</html>